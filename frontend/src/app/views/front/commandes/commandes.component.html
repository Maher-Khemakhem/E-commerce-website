<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Commande List</h2>
    <!--<button type="button" class="btn btn-outline-primary" (click)="openModel()">Add Commande</button>-->
  </div>

  <div class="table-responsive">
    <table mat-table [dataSource]="commandes" class="mat-elevation-z8">
      <ng-container matColumnDef="items">
        <th mat-header-cell *matHeaderCellDef> Items </th>
        <td mat-cell *matCellDef="let commande">
          <mat-card>
            <mat-card-header>
              <mat-card-title>Items</mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <table mat-table [dataSource]="commande.cart_items" class="mat-elevation-z8">
                <ng-container matColumnDef="image">
                  <th mat-header-cell *matHeaderCellDef> Image </th>
                  <td mat-cell *matCellDef="let product">
                    <img [src]="'http://127.0.0.1:8000/api/images/' + product.image" alt="Image" class="img-fluid" />
                  </td>
                </ng-container>

                <ng-container matColumnDef="title">
                  <th mat-header-cell *matHeaderCellDef> Title </th>
                  <td mat-cell *matCellDef="let product"> {{ product.title }} </td>
                </ng-container>

                <ng-container matColumnDef="quantity">
                  <th mat-header-cell *matHeaderCellDef> Quantity </th>
                  <td mat-cell *matCellDef="let product"> {{ product.quantity }} </td>
                </ng-container>

                <ng-container matColumnDef="price">
                  <th mat-header-cell *matHeaderCellDef> Price </th>
                  <td mat-cell *matCellDef="let product"> {{ product.price }} </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="['image', 'title', 'quantity', 'price']"></tr>
                <tr mat-row *matRowDef="let row; columns: ['image', 'title', 'quantity', 'price'];"></tr>
              </table>
            </mat-card-content>
          </mat-card>
        </td>
      </ng-container>

      <ng-container matColumnDef="cardType">
        <th mat-header-cell *matHeaderCellDef> Card Type </th>
        <td mat-cell *matCellDef="let commande"> {{ commande.card_type }} </td>
      </ng-container>

      <ng-container matColumnDef="cardName">
        <th mat-header-cell *matHeaderCellDef> Card Name </th>
        <td mat-cell *matCellDef="let commande"> {{ commande.card_name }} </td>
      </ng-container>

      <ng-container matColumnDef="cardNumber">
        <th mat-header-cell *matHeaderCellDef> Card Number </th>
        <td mat-cell *matCellDef="let commande"> {{ commande.card_number }} </td>
      </ng-container>
      <ng-container matColumnDef="total_price">
        <th mat-header-cell *matHeaderCellDef> Total </th>
        <td mat-cell *matCellDef="let commande"> {{ commande.total_price }} </td>
      </ng-container>
      
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef> Actions </th>
        <td mat-cell *matCellDef="let commande">
          <button mat-raised-button color="primary" (click)="ne7i(commande.id)">Delivered</button>
        </td>
      </ng-container>
      

      <tr mat-header-row *matHeaderRowDef="['items', 'cardType', 'cardName', 'cardNumber', 'actions']"></tr>
      <tr mat-row *matRowDef="let row; columns: ['items', 'cardType', 'cardName', 'cardNumber', 'actions'];"></tr>
    </table>
  </div>

  <ngb-pagination [collectionSize]="totalCount" [pageSize]="limit" [(page)]="page" aria-label="Default pagination" (pageChange)="loadCommandes()"></ngb-pagination>
</div>
